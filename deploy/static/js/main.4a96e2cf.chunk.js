(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(14),c=n.n(a),s=n(13),i=(n(27),n(0));function o(){return Object(i.jsxs)("ul",{className:"header",children:[Object(i.jsx)("li",{children:Object(i.jsx)(s.b,{className:"header__item",to:"/notes",children:"Search notes"})}),Object(i.jsx)("li",{children:Object(i.jsx)(s.b,{className:"header__item",to:"/addNewNote",children:"Add new note"})})]})}var u,l,j=n(2),d=n(45),p=n(44),b=n(3),f=n.n(b),h=n(5),O=n(8),x=n(6);function v(e){return e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0)}function m(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return console.log(n+"/"+t+"/"+r),n+"/"+t+"/"+r}var g={createDB:function(){return new Promise((function(e,t){(u=indexedDB.open("notesStore",1)).onupgradeneeded=function(t){(l=t.target.result).createObjectStore("notes",{keyPath:"id"}),e(u)},u.onsuccess=function(t){l=t.target.result,e(u)},u.onerror=function(){t()}}))},addNote:function(e){return new Promise((function(t,n){l.transaction(["notes"],"readwrite").objectStore("notes").add(e),setTimeout((function(){return t(!0)}),1e3)}))},updateNote:function(e){return new Promise((function(t,n){var r=l.transaction(["notes"],"readwrite").objectStore("notes").openCursor(e.id);r.onsuccess=function(n){var r=n.target.result;r.value.id===e.id&&(r.update(e,e.id),setTimeout((function(){return t(!0)}),1e3))},r.onerror=function(){return n(!1)}}))},getNotes:function(){return new Promise((function(e){var t=l.transaction(["notes"],"readonly"),n=t.objectStore("notes").openCursor(),r=[];n.onsuccess=function(e){if(e.target.result){var t=e.target.result;r.push(t.value),t.continue()}},t.oncomplete=function(){setTimeout((function(){return e(r)}),1e3)}}))},getNoteById:function(e){return new Promise((function(t,n){l.transaction(["notes"],"readonly").objectStore("notes").openCursor().onsuccess=function(n){if(n.target.result){var r=n.target.result;r.value.id===e&&t(r.value),r.continue()}else t({})}}))},deleteNoteById:function(e){return new Promise((function(t,n){var r=l.transaction("notes","readwrite").objectStore("notes").delete(e);r.onsuccess=function(){t(!0)},r.onerror=function(){t(!1)}}))}};function N(){return(N=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.addNote(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return w.apply(this,arguments)}function w(){return(w=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getNotes();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getNoteById(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.updateNote(t);case 2:return e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.deleteNoteById(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(h.a)(f.a.mark((function e(t){var n,r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return n=e.sent,r=t.split("#"),a=[],c=function(){n.forEach((function(e){for(var t=0,n=e.titleTags+e.descriptionTags,c=0;c<r.length;c++)n.includes(r[c])&&t++;0!==t&&a.push({note:e,amount:t})})),a.sort((function(e,t){return e.amount-t.amount}));var e=[];return a.forEach((function(t){e.push(t.note)})),e},e.abrupt("return",c());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.createDB(),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B={createStore:function(){return T.apply(this,arguments)},getNotes:_,getNoteById:function(e){return y.apply(this,arguments)},updateNote:function(e){return S.apply(this,arguments)},deleteNoteById:function(e){return k.apply(this,arguments)},addNewNote:function(e){return N.apply(this,arguments)},getNotesByTags:function(e){return D.apply(this,arguments)}},C=B;n(35);function P(){return Object(i.jsx)("div",{className:"loader",children:Object(i.jsxs)("div",{className:"lds-ring",children:[Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{})]})})}function F(e){var t=Object(r.useState)(!1),n=Object(x.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),i=Object(x.a)(s,2),o=i[0],u=i[1],l=function(){var t=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(!0),t.next=4,e();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),u(o);case 9:return t.prev=9,c(!1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})));return function(){return t.apply(this,arguments)}}();return[l,a,o]}n(36);function I(){var e=F((function(){var e=Object(O.a)(Object(O.a)({},o),{},{date:m(),id:String(v(o.title+Date.now()))});C.addNewNote(e)})),t=Object(x.a)(e,3),n=t[0],a=t[1],c=(t[2],Object(r.useState)({date:"",description:"",title:"",titleTags:"",descriptionTags:"",id:""})),s=Object(x.a)(c,2),o=s[0],u=s[1];return Object(i.jsx)("form",{className:"noteForm",onSubmit:l,children:a?Object(i.jsx)(P,{}):Object(i.jsxs)("div",{className:"noteForm__wrapper",children:[Object(i.jsx)("input",{className:"noteForm__titleInput",placeholder:"Title",onChange:function(e){var t=e.target.value,n=p(t);u(Object(O.a)(Object(O.a)({},o),{},{title:t,titleTags:n}))},value:o.title,type:"text",required:!0}),Object(i.jsx)("textarea",{className:"noteForm__descriptionInput",placeholder:"Description",onChange:function(e){var t=e.target.value,n=p(t);u(Object(O.a)(Object(O.a)({},o),{},{description:t,descriptionTags:n}))},value:o.description}),Object(i.jsx)("div",{className:"noteForm__tagsInput",children:o.titleTags+o.descriptionTags}),Object(i.jsx)("button",{className:"noteForm__saveBtn",onClick:function(e){return l(e)},children:"Save"})]})});function l(e){return j.apply(this,arguments)}function j(){return(j=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0===o.title.length){e.next=7;break}return e.next=4,n();case 4:d(),e.next=9;break;case 7:d(),alert("\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){u({date:String(Date.now()),description:"",title:"",titleTags:"",descriptionTags:"",id:""})}function p(e){for(var t="",n=0;n<e.length;n++)if("#"===e[n]&&(" "===e[n-1]||n-1<0))for(;" "!==e[n]&&n<e.length;)t+=e[n],n++;return 1===t.length?"":t}}function E(){return Object(i.jsx)("div",{className:"page addNewNotePage",children:Object(i.jsx)(I,{})})}n(37);function A(e){var t=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=Object(r.useState)(!1),a=Object(x.a)(n,2),c=a[0],o=a[1],u=Object(r.useState)(e),l=Object(x.a)(u,2),j=l[0],d=l[1],p=F(t),b=Object(x.a)(p,3),v=b[0],m=b[1],g=(b[2],function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.updateNote(j);case 2:o(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(i.jsx)(i.Fragment,{children:m?Object(i.jsx)(P,{}):c?Object(i.jsxs)("div",{className:"noteDetail",children:[Object(i.jsx)(s.b,{to:"/notes",className:"noteDetail__closeBtn",children:"\u274c"}),Object(i.jsx)("button",{className:"noteDetail__edit",onClick:function(){return v()},children:"apply"}),Object(i.jsx)("input",{className:"noteDetail__title",value:j.title,onChange:function(e){var t=e.target.value,n=N(t);d(Object(O.a)(Object(O.a)({},j),{},{title:t,titleTags:n}))}}),Object(i.jsx)("textarea",{className:"noteDetail__description textArea",value:j.description,onChange:function(e){var t=e.target.value,n=N(t);d(Object(O.a)(Object(O.a)({},j),{},{description:t,descriptionTags:n}))}}),Object(i.jsx)("span",{className:"noteDetail__date",children:j.date}),Object(i.jsx)("span",{className:"noteDetail__tags",children:j.titleTags+" "+j.descriptionTags})]}):Object(i.jsxs)("div",{className:"noteDetail",children:[Object(i.jsx)(s.b,{to:"/notes",className:"noteDetail__closeBtn",children:"\u274c"}),Object(i.jsx)("button",{className:"noteDetail__edit",onClick:function(){return o(!0)},children:"edit"}),Object(i.jsx)("p",{className:"noteDetail__title",children:_(j.title)}),Object(i.jsx)("p",{className:"noteDetail__description",children:_(j.description)}),Object(i.jsx)("span",{className:"noteDetail__date",children:j.date}),Object(i.jsx)("span",{className:"noteDetail__tags",children:j.titleTags+" "+j.descriptionTags})]})});function N(e){for(var t="",n=0;n<e.length;n++)if("#"===e[n])for(;" "!==e[n]&&n<e.length;)t+=e[n],n++;return 1===t.length?"":t}function _(t){var n=function(e){for(var t="",n=0;n<e.length;n++)"#"!==e[n]&&(t+=e[n]);return t}(t),r=(e.titleTags+e.descriptionTags).split("#"),a=n.split(" ");return Object(i.jsx)(i.Fragment,{children:a.map((function(e,t){return r.includes(a[t])?Object(i.jsx)("span",{className:"marckSpan",children:a[t]+" "},Date.now()):a[t]+" "}))})}}function q(){var e=Object(j.i)(),t=function(){var t=Object(h.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getNoteById(e.id);case 2:n=t.sent,d(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=F(t),a=Object(x.a)(n,3),c=a[0],s=a[1],o=(a[2],Object(r.useState)()),u=Object(x.a)(o,2),l=u[0],d=u[1];return Object(r.useEffect)((function(){c()}),[]),Object(i.jsx)("div",{className:"page noteDetailPage",children:s?Object(i.jsx)(P,{}):Object(i.jsx)("div",{className:"noteDetailPage_wrapper",children:void 0!==l?Object(i.jsx)(A,Object(O.a)({},l)):Object(i.jsx)("h3",{children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})})})}function J(e){for(var t="",n=0;n<e.length;n++)"#"!==e[n]&&(t+=e[n]);return t}n(38);function Q(e){var t=Object(j.g)(),n=function(){var n=Object(h.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.deleteNoteById(e.id);case 2:t.push("/notes");case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"note",children:[Object(i.jsxs)("div",{className:"note__wrapper",onClick:function(){t.push("/notes/".concat(e.id))},children:[Object(i.jsx)("h2",{className:"note__title",children:J(e.title)}),Object(i.jsx)("p",{className:"note__description",children:J(e.description)}),Object(i.jsx)("span",{className:"note__tags",children:e.titleTags+" "+e.descriptionTags}),Object(i.jsx)("span",{className:"note__date",children:e.date})]}),Object(i.jsx)("div",{className:"note__deleteBtn",onClick:n,children:"\ud83d\uddd1"})]})}n(39);function M(e){var t=Object(r.useState)(""),n=Object(x.a)(t,2),a=n[0],c=n[1];return Object(i.jsxs)("div",{className:"searchBar",children:[Object(i.jsxs)("label",{className:"searchBar__wrapper",children:[Object(i.jsx)("div",{className:"searchBar__icon"}),Object(i.jsx)("input",{onChange:function(e){var t,n=e.target.value;t=n.split(" ").join("#"),c(t)},placeholder:"Search (enter tags seperated with whitespace)",className:"searchBar__input"})]}),Object(i.jsx)("button",{onClick:function(){e.setQuery(a)},type:"submit",className:"searchBar__btn",children:"Search"})]})}n(40);function Y(){var e=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getNotesByTags(a);case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=Object(r.useState)(""),n=Object(x.a)(t,2),a=n[0],c=n[1],s=F(e),o=Object(x.a)(s,3),u=o[0],l=o[1],j=(o[2],Object(r.useState)([])),d=Object(x.a)(j,2),p=d[0],b=d[1];Object(r.useEffect)((function(){u()}),[a]);var v={query:a,setQuery:c};return Object(i.jsx)("div",{className:"page notesPage",children:l?Object(i.jsx)(P,{}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(M,Object(O.a)({},v)),Object(i.jsx)("div",{className:"notesPage__wrapper",children:0===p.length?Object(i.jsx)("h2",{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):p.map((function(e){return Object(r.createElement)(Q,Object(O.a)(Object(O.a)({},e),{},{key:Date.now()+e.title}))}))})]})})}function z(){return Object(i.jsx)("div",{className:"page notFoundPage",children:Object(i.jsx)("div",{className:"noteFoundPaage__wrapper",children:Object(i.jsx)("h1",{children:"Not Found"})})})}function G(){var e=Object(j.h)();return Object(i.jsx)(d.a,{children:Object(i.jsx)(p.a,{timeout:200,classNames:"page",unmountOnExit:!0,children:Object(i.jsxs)(j.d,{location:e,children:[Object(i.jsx)(j.b,{path:"/addNewNote",children:Object(i.jsx)(E,{})}),Object(i.jsx)(j.b,{exact:!0,path:"/notes",children:Object(i.jsx)(Y,{})}),Object(i.jsx)(j.b,{exact:!0,path:"/notes/:id",children:Object(i.jsx)(q,{})}),Object(i.jsx)(j.b,{path:"/notfound",children:Object(i.jsx)(z,{})}),Object(i.jsx)(j.b,{exact:!0,path:"/",children:Object(i.jsx)(j.a,{to:"/addNewNote"})}),Object(i.jsx)(j.a,{to:"/notfound"})]})},e.key)})}n(41);var H=function(){return C.createStore(),Object(i.jsx)(s.a,{children:Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(o,{}),Object(i.jsx)(G,{})]})})};c.a.render(Object(i.jsx)(H,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.4a96e2cf.chunk.js.map